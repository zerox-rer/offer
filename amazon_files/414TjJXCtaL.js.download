'use strict';mix_d("VSEDistributionCards__vse-vw-dp-card:vse-vw-dp-card__6b4b5kEe","exports tslib @p/A @c/metrics @c/logger @c/scoped-dom @p/a-modal @c/aui-untrusted-ajax @c/navigation @c/aui-carousel @c/browser-window".split(" "),function(sa,U,Ra,V,Sa,Ta,Ua,Va,Wa,Xa,Ya){function C(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var c=C(Ra),Za=C(Sa),W=C(Ta),$a=C(Ua),ab=C(Va),ta=C(Wa),bb=C(Xa),D=C(Ya),ua,x=function(a){var b=ua;Object.keys(a).length<b.requiredNumOfFields&&V.count("invalidNumOfFields-"+
b.producerId,1);URLSearchParams&&"1"===(new URLSearchParams(window.location.search)).get("iveDebug")&&(window.DistributionMetricsDebugInfo?window.DistributionMetricsDebugInfo.push(a):window.DistributionMetricsDebugInfo=[a]);a=JSON.stringify(a).replace(/\\\\/g,"");V.event(JSON.parse(a),b.producerId,b.schemaId,{ssd:!1})},cb=function(a){return function(b){return c["default"].$.extend({eventSource:a.eventSource,placementContext:a.placementContext,clientId:a.clientId,timestamp:new Date,userAgentData:navigator.userAgent,
titleSessionId:"0",videoAsin:"",videoAsinList:a.videoAsinList||"",rankingStrategy:a.rankingStrategy||"",creativeId:a.creativeId,stringPayload:a.stringPayload||""},b)}},db=function(){return function(a,b,e,h){var g=this;this.onIntersectionObserved=function(k,n){k.forEach(function(f){if(n){var p=f.target;if(f.isIntersecting)f=setTimeout(function(){var l=g.childElems.indexOf(p);g.callback(l);g.viewTimeoutMap.delete(p)},1E3),g.viewTimeoutMap.set(p,f);else if(f=g.viewTimeoutMap.get(p))clearTimeout(f),g.viewTimeoutMap.delete(p)}else f.isIntersecting&&
(f=g.childElems.indexOf(f.target),g.callback(f))})};void 0===a&&(a=null);this.callback=e;this.childElems=Array.from(document.querySelectorAll(b)).filter(function(k){return null!==k.offsetParent});this.optionsForIntersection={root:a,rootMargin:"0px",threshold:.5};this.viewTimeoutMap=new Map;this.intersectionObserver=new IntersectionObserver(function(k){return g.onIntersectionObserved(k,h)},this.optionsForIntersection);this.childElems.forEach(function(k){g.intersectionObserver.observe(k)})}}(),da=function(a,
b,e,h,g){void 0===g&&(g=3);g--;ab["default"].post(a,{accepts:"*/*",contentType:"application/json;charset=UTF-8",timeout:1E4},b).then(function(k){e(k)}).catch(function(k){0<g?da(a,b,e,h,g):(0===k.statusCode&&u("Request has failed with unknown status code. Payload: "+JSON.stringify(b),"ERROR"),h(k))})},d={pageType:"",clientPrefix:"",deviceType:"",placement:"",metricsPlacement:"",cardId:"",creativeId:"",requester:"",buildCsmPayload:function(a){},clientName:"",isIvxOpen:!1,enableWidgetMetricsAfterOneSecond:!1,
isDesktopIngressCXUpdated:!1},r=function(a,b){void 0===b&&(b=1);try{V.count("vse:csm:cards:"+d.clientPrefix+":"+a,b)}catch(e){u("failed to post CSM metric","ERROR")}},E=function(a,b){void 0===b&&(b=1);r(a+":"+d.deviceType,b)},u=function(a,b){Za["default"].log("VSEWidgetCards: "+a+". Client prefix: "+d.clientPrefix+", Page type: "+d.pageType,b,"VSEDistributionCards")},va=function(a,b,e){try{if(c["default"].$("."+d.cardId).length){var h=!1,g=b.map(function(l){return l.contentId}).join(","),k=b.filter(function(l){return""!==
l.metadata.rankingStrategy}).map(function(l){return l.metadata.rankingStrategy}).join(","),n=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetRendered",intPayload:1,videoAsinList:g,rankingStrategy:k});x(n);r("cardWidgetRendered",1);n=function(l){l=d.buildCsmPayload({eventName:d.clientPrefix+":videoThumbnailImpression",intPayload:l,videoAsin:b[l].contentId,rankingStrategy:b[l].metadata.rankingStrategy});x(l)};var f=function(){for(var l=e.carouselItemClassName,m=0;m<b.length;m++)if(!b[m].impressionRecorded){var q=
c["default"].$("."+d.cardId+" ."+l+":nth-child("+(m+1)+")");if(c["default"].onScreen(q,0)){var t=d.buildCsmPayload({eventName:d.clientPrefix+":thumbnailImpression",intPayload:m,videoAsin:b[m].contentId,rankingStrategy:b[m].metadata.rankingStrategy});x(t);eb(q,b[m]);b[m].impressionRecorded=!0}else break}},p=function(){if(h)c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,p);else{var l=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetScrolledInView",intPayload:1,videoAsinList:g,
rankingStrategy:k}),m=c["default"].$("."+d.cardId+" ."+e.carouselItemClassName).first(),q=function(){x(l);var F=c["default"].now()-a;r("cardWidgetScrolledInViewTime",F);E("cardWidgetScrolledInView");h=!0;f()};if(d.enableWidgetMetricsAfterOneSecond){var t,w=function(){m&&c["default"].onScreen(m,0)?t||(t=setTimeout(function(){m&&c["default"].onScreen(m,0)&&(q(),c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,w))},1E3)):t&&(clearTimeout(t),t=null)};w()}else m&&c["default"].onScreen(m,0)&&
q()}};p();c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,p);c["default"].on("vse:"+d.clientPrefix+":searchform:focus",function(){var l=d.buildCsmPayload({eventName:d.clientPrefix+":serchFormFocus",intPayload:1,videoAsinList:g,rankingStrategy:k});x(l)});e.widgetMetricsHandler(f,function(l){var m=d.buildCsmPayload({eventName:d.clientPrefix+":"+l+":paginationButtonClicked",intPayload:1});r(l+":paginationButtonClicked",1);x(m)});window.IntersectionObserver&&window.IntersectionObserverEntry&&
new db(null,"."+e.carouselItemClassName,n,d.enableWidgetMetricsAfterOneSecond)}}catch(l){u("Error occurred while emitting widget metrics "+l,"ERROR"),r("widgetMetricsEmissionError")}},eb=function(a,b){try{var e=a.find("[data-pfoasin!=''][data-pfoasin]");c["default"].each(e,function(h,g){h=h.getAttribute("data-pfoasin");g=d.buildCsmPayload({eventName:d.clientPrefix+":productElementImpression",intPayload:g,videoAsin:b.contentId,stringPayload:h});x(g)})}catch(h){u("Unable to log pfo render metric "+
b,"WARN")}},fb=function(a,b){var e=[];a=a.split(",");0<a.length&&a.forEach(function(h){h=h.split(":");1<h.length&&e.push({name:h[0],assignment:h[1],ignoreForG2S2Key:b})});return e},gb=function(a,b){a="/gp/mobile/tag/?ref=vse_cards_ingress"+a+b.replace("/?_encoding=UTF8","");da(a,{},function(){},function(){})},hb=function(a,b,e,h,g,k){void 0===k&&(k=!0);var n=a.map(function(f){delete f.htmlEl;return f});b||(b=wa(a[0],{}));a=[];e.weblabContext&&(a=fb(e.weblabContext,!0));da(e.nilgiriEndpoint,{requester:d.requester,
clientPrefix:d.clientPrefix,page:d.pageType,placement:d.placement,device:d.deviceType,metadata:{id:"vse-video-widget-card-"+d.clientPrefix,celQueryStringParam:e.celQueryStringParam,requestHasVideoData:"true"},videoDataList:k?n:void 0,video:{contentID:b.contentId,contentIDType:"VIDEO_ID",videoURL:b.videoUrl,imageURL:b.imageUrl,vendorCode:b.vendorCode,vendorTrackingId:b.vendorTrackingId,videoReferenceId:b.videoReferenceId,videoTitle:b.title,aciContentId:b.aciContentId,videoAge:b.videoAge},marketplaceID:e.marketplaceId,
locale:e.locale,product:{contentID:b.productAsin,contentIDType:"ASIN",parentContentID:b.parentAsin,parentContentIDType:"ASIN"},creativeId:d.creativeId,weblabContext:a},h,g)},wa=function(a,b){var e=a.productAsin;e||c["default"].objectIsEmpty(a.metadata.relatedProductsAsins)||(e=a.metadata.relatedProductsAsins.split(",")[0]);var h=a.contentId,g=a.metadata.title,k=a.metadata.vendorName,n=a.metadata.vendorCode,f=a.metadata.entityId,p=a.metadata.entityType,l=a.metadata.fullReviewLink,m=a.metadata.title,
q=a.metadata.videoURL,t=a.metadata.formattedDuration,w=a.metadata.videoImageUrl,F=a.parentAsin,N="vse-cards-ingress"+a.index,O=a.metadata.relatedProductsAsins,P=a.metadata.vendorTrackingId,Q=a.metadata.referenceId,R=a.index,ib=a.metadata.videoAge,y=a.metadata.closedCaptions,xa=[];if(y&&(y=y.split(","),0===y.length%2))for(var G=0;G<y.length;G+=2)void 0!==y[G+1]&&xa.push({locale:y[G],url:y[G+1]});y=a.metadata.videoDetailPageLink;G=a.impressionRecorded;var jb=a.lastPlayingTimestamp,kb=a.htmlEl,lb=a.metadata.rankingStrategy,
mb=a.metadata.aciContentId,nb=a.metadata.videoMimeType,ob=a.metadata.profileLink,pb=a.metadata.profileImageUrl,qb=""===a.metadata.source?"VSE":a.metadata.source,rb=a.metadata.highlightedAsin,sb=a.metadata.status,tb=a.metadata.orientation,ub=a.metadata.channelId;a=a.metadata.carouselItems;var ya=[];a&&(ya=JSON.parse(a));return{contentId:h,title:g,vendorName:k,vendorCode:n,entityId:f,entityType:p,referenceUrl:l,referenceLinkTitle:m,videoUrl:q,duration:t,imageUrl:w,videoVoteContainer:{},productAsin:e,
parentAsin:F,refTag:N,relatedProducts:O,vendorTrackingId:P,videoReferenceId:Q,index:R,$el:b,videoAge:ib,closedCaptions:xa,videoDetailPageLink:y,impressionRecorded:G,lastPlayingTimestamp:jb,htmlEl:kb,rankingStrategy:lb,aciContentId:mb,videoMimeType:nb,profileLink:ob,profileImageUrl:pb,source:qb,highlightedAsin:rb,status:sb,orientation:tb,channelId:ub,carouselItems:ya}},ea=function(a,b,e){var h=[];[].forEach.call(a,function(g,k){var n=g.dataset.asin,f=g.dataset;if(n){h.push({contentId:n,productAsin:f.productAsin||
"",parentAsin:f.parentAsin||"",metadata:{videoImageUrl:f.videoImageUrlUnchanged||f.videoImageUrl||"",videoURL:f.videoUrl||f.videoURL||"",title:f.title||"",formattedDuration:f.formattedDuration||"",vendorName:f.vendorName||"",vendorCode:f.vendorCode||"",referenceId:f.referenceId||"",fullReviewLink:f.referenceUrl||"",videoDetailPageLink:f.videoDetailPageLink||"vdp/"+n+b.celQueryStringParam,asin:f.asin||"",vendorTrackingId:f.vendorTrackingId||"",relatedProductsAsins:f.relatedProductsAsins||"",videoAge:f.videoAge||
"",closedCaptions:f.closedCaptions||"",creatorType:f.creatorType||"",publicName:f.publicName||"",profileLink:f.profileLink||"",profileImageUrl:f.profileImageUrl||"",rankingStrategy:f.rankingStrategy||"",aciContentId:f.csaCItemId||"",videoMimeType:f.videoMimeType||"",entityId:f.entityId||"",entityType:f.entityType||"",videoImageHeight:f.videoImageHeight||"",videoImageWidth:f.videoImageWidth||"",videoImagePhysicalId:f.videoImagePhysicalId||"",videoImageExtension:f.videoImageExtension||"",groupType:f.groupType||
"",source:f.source||"",highlightedAsin:f.highlightedAsin||"",status:f.status||"",orientation:f.orientation||"",channelId:f.channelId||"",carouselItems:f.carouselItems||""},impressionRecorded:!1,lastPlayingTimestamp:0,index:k,htmlEl:g});g=W["default"].cardRoot.getElementsByClassName(e.vseVideoDataItem)[k];try{f.profileLink&&f.profileImageUrl&&g&&za(g,g.querySelector("."+e.vseProfilePlaceholder),e.vseVideoThumbnailProfile)}catch(p){u("Exception has occurred while initializing profiles. Exception details: "+
p,"ERROR"),r("profileInitializationFailure",1)}try{""!==f.disclosureText&&""!==f.disclosureLink&&g&&za(g,g.querySelector("."+e.vseVideoCreatorContainer),e.vseVideoDisclosure)}catch(p){u("Exception has occurred while moving the disclosure link. Exception details: "+p,"ERROR"),r("moveDisclosureElementFailure",1)}}});return h},za=function(a,b,e){a=a.querySelector("."+e);b&&a&&a.parentNode&&(b.appendChild(a.cloneNode(!0)),a.parentNode.removeChild(a),(b=b.querySelector("."+e))&&b.classList.remove("aok-hidden"))},
Aa=function(a,b){void 0===b&&(b=!1);var e=D["default"].innerHeight*(400<=a.height()?.1:.2),h=D["default"].innerHeight-a.height()-e;if(b)try{var g=a[0].getBoundingClientRect();if(0>=g.width||0>=g.height)var k=!1;else b=void 0,b=0<g.top?Math.min(a.outerHeight(),D["default"].innerHeight-g.top):Math.min(g.bottom,D["default"].innerHeight),b=Math.max(0,b),k=b>=.5*a.outerHeight()}catch(n){k=!1}else k=D["default"].scrollY+h>=a.offset().top&&D["default"].scrollY+e<=a.offset().top;return k},X=function(){return D["default"].innerWidth>
D["default"].innerHeight},z,Y=!1,Ba,fa,A,v,K,ha=!1,ia,S,L,B,H,I,J,Z=!1,Ca=!0,Da=!1,ja,ka=0,aa,Ea=null,Ab=function(a,b,e,h,g,k,n,f){void 0===g&&(g=!1);void 0===k&&(k=!0);void 0===n&&(n=!1);void 0===f&&(f=void 0);return U.__awaiter(void 0,void 0,void 0,function(){var p,l,m;return U.__generator(this,function(q){try{K=e;v=b;A=a;Z=g;Ca=k;Da=n;p=c["default"].now();ua={schemaId:"vse.VSECardsEvents.7",producerId:"vsemetrics_widgetcards",requiredNumOfFields:13};I=W["default"].cardRoot.getElementsByClassName(v.vseVideoDataItem);
if(!I)return r("noCardsIngressDom"),M(),[2];0<c["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview").length&&(aa=c["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview"),c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,la),la());if((l=W["default"].cardRoot.getElementsByClassName(v.vseWidgetPageState))&&l[0]&&l[0].dataset){H=l[0].dataset;z=ea(I,H,v);q=H;var t=f,w,F,N,O;void 0===t&&(t="vse_cards");d.deviceType=A?"Mobile":"Desktop";d.pageType=q.client||
"Gateway";d.clientName=null!==(w=q.clientName)&&void 0!==w?w:"";var P;(P=null===(F=q.clientPrefix)||void 0===F?void 0:F.toLowerCase())||(P="IVE_VFTP"==d.clientName?d.clientName.toLowerCase():d.pageType.toLowerCase());d.clientPrefix=P;d.isDesktopIngressCXUpdated="true"===q.desktopIngressCxUpdated;d.placement=(""!==d.clientName?d.clientName:d.pageType)+"Card-"+d.deviceType;d.metricsPlacement=(c["default"].capabilities.mobile?c["default"].capabilities.isAmazonApp?"mobile_app":"mobile_web":c["default"].capabilities.tablet?
c["default"].capabilities.isAmazonApp?"tablet_app":"tablet_web":"desktop_web")+"."+d.placement+"."+t;d.cardId=null!==(N=q.cardId)&&void 0!==N?N:"";d.creativeId=null!==(O=q.creativeId)&&void 0!==O?O:"";d.requester=q.requester||"VSEWidgetCards";d.enableWidgetMetricsAfterOneSecond="T1"===q.enableWidgetMetricsAfterOneSecond;ia="vse-component-feed-carousel-"+d.cardId;L="vse-widget-popover-"+d.cardId;if(!c["default"].capabilities.video)return r("videoNotSupported"),[2];E("cardWidgetRendered");var Q=z[0].productAsin?
z[0].productAsin:"";d.buildCsmPayload=cb({placementContext:d.metricsPlacement,clientId:"VSE",eventSource:"VSEWidgetCards",stringPayload:null!==Q&&void 0!==Q?Q:"",creativeId:d.creativeId});if(A||"Detail"===d.pageType)va(p,z,h);else{c["default"].$("."+d.cardId+" [class*=vsePlaceholder] .a-fixed-right-grid-inner").addClass(v.vseNoRightPadding);w=p;try{Fa(w,h,"vse-carousel-items-added-"+ia),Fa(w,h,"vse:cards:"+d.clientPrefix+":quad:ready")}catch(R){ma(R)}c["default"].trigger("vse-card-ready-"+ia)}(m=
c["default"].capabilities.isAmazonApp&&c["default"].capabilities.android&&(c["default"].capabilities.androidVersion+"").startsWith("8"))?(r("useMshopAutoplayFallback"),M()):(vb(),wb(),xb(),yb(),zb());"gatewayquad"===d.clientPrefix&&c["default"].trigger("vse:cards:"+d.clientPrefix+":quad:ready");Z&&(Ga(null,c["default"].now()),Ha())}else r("pageStateNotFound"),M()}catch(R){u("fatal exception has occurred. Exception details: "+R,"FATAL"),r("widgetFatalException"),M()}return[2]})})},Fa=function(a,b,
e){c["default"].off(e);c["default"].on(e,function(){Y||(Y=!0,z=ea(I,H,v),va(a,z,b))})},wb=function(a){void 0===a&&(a="click touch");c["default"].declarative("vse-widget-carousel-see-more-"+d.cardId,a,function(){return Ia()});c["default"].declarative("vse-widget-carousel-custom-action-"+d.cardId,a,function(b){var e;(b=null===(e=b.data)||void 0===e?void 0:e.link)?(Ja("widgetCustomActionClicked"),ta["default"].setLocation(b)):Ia()})},Ia=function(){A&&(ha=!0);c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").find(".vse-carousel-item").first().click();
Ja("seeMoreLinkClicked")},Ja=function(a){E(a);a=d.buildCsmPayload({eventName:d.clientPrefix+":"+a,intPayload:1});x(a)},xb=function(){var a=0;c["default"].off("a:popover:afterShow:vse-widget-popover-"+d.cardId);c["default"].on("a:popover:afterShow:vse-widget-popover-"+d.cardId,function(b){try{if(c["default"].$(b.popover.$popover).addClass(c["default"].$("#"+L).data("cssClass")),a++,fa=!0,1===a){c["default"].$(b.popover.$popover).addClass(v.vseVerticalLightbox);var e=c["default"].now();B&&B.refresh();
Z?(c["default"].$(b.popover.$popover).addClass(v.vseRemoveAbsolute),na()):(Ga(b.popover.$popover,e),Ha())}else na()}catch(h){ma(h)}})},Ga=function(a,b){c["default"].on(d.clientPrefix+":vse:player:registered",function(){c["default"].$("#"+L+" [class*=_vseWidgetLbVideoBlock_]").first().animate({opacity:1});if(fa){na();c["default"].$(a).addClass(v.vseRemoveAbsolute);var e=c["default"].now()-b;E("cardWidgetPopoverContentWaitTime",e)}});c["default"].on("vse:cards:"+d.clientPrefix+":componentbuilder:failed",
function(){Ka();B?B.hide():c["default"].trigger("vse:cards:"+d.cardId+":secondary:view:close");Z||c["default"].delay(function(){ta["default"].setLocation(J.videoDetailPageLink)},500)})},na=function(){ha&&c["default"].trigger("vse:"+d.clientPrefix+":page:watchAllClicked");ha=!1;var a={assetSpec:J,lightBoxId:""+L};!0===Da&&Ea!==J.contentId&&(Ea=J.contentId,a.lazyLoadProductAsin=J.productAsin);c["default"].trigger("vse:"+d.clientPrefix+":page:lightBoxOpened",a);a=c["default"].$("#"+L+" [class*=_vseWidgetLbVideoBlock_]");
0<a.length&&(S=a.get(0),null!=K&&(Bb(S),K.elect(S)))},yb=function(){c["default"].off("a:popover:beforeHide:vse-widget-popover-"+d.cardId);c["default"].on("a:popover:beforeHide:vse-widget-popover-"+d.cardId,function(){fa=!1;Ba?(c["default"].trigger("vse:"+d.clientPrefix+":page:lightBoxClosed"),null!=K&&S&&K.unsubscribe(S)):E("cardWidgetLBClosedBeforeAjax")})},Ha=function(){hb(z,J,H,function(a){Ba=!0;r("preloadSuccess");c["default"].$("#"+L+" [class*=_vseWidgetLbVideoBlock_]").html(a.responseBody)},
function(a){c["default"].trigger("vse:cards:"+d.clientPrefix+":componentbuilder:failed");E("preloadFailed");r("preloadFailed:"+a.statusCode);u("NilgiriService componentbuilder call has failed.\n        Status code: "+a.statusCode+". Status text: "+a.statusText,"FATAL");M()},Ca)},M=function(){var a=W["default"].cardRoot.getElementsByClassName(v.vseSeeMoreLink)[0];a&&a.classList&&a.classList.add("aok-hidden")},vb=function(){try{[].forEach.call(I,function(a){a.children[0].removeAttribute("target")}),
La(),c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").delegate(".vse-carousel-item","click",function(a){Y||(z=ea(I,H,v),Y=!0);if(!c["default"].$(a.target).closest("."+v.vseProfilePlaceholder).length){a.preventDefault();var b=c["default"].$(a.currentTarget);a=b.closest("li").index();var e=z[a];e.metadata&&(J=wa(e,b),b=d.buildCsmPayload({eventName:d.clientPrefix+":cardWidgetClicked",intPayload:1,videoAsin:e.contentId,rankingStrategy:e.metadata.rankingStrategy}),E("cardWidgetClicked"),x(b),
gb(a,H.celQueryStringParam),A?c["default"].trigger("vse:cards:"+d.cardId+":secondary:view:open"):(B=$a["default"].get(c["default"].$("."+d.cardId+" #vse-widget-popover-trigger")),c["default"].objectIsEmpty(B)?r("lbNotFoundDesktop"):B.show()))}})}catch(a){ma(a)}},ma=function(a){u("fatal exception has occurred in LB. Exception details: "+a,"FATAL");r("lightboxOpenFatalException");M();Ka();B&&B.hide()},Ka=function(){La();[].forEach.call(I,function(a,b){a.children&&a.children[0]&&a.children[0].setAttribute("target",
z[b].metadata.videoDetailPageLink)})},La=function(){c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel").undelegate(".vse-carousel-item","click")},Bb=function(a){K.subscribe(a,function(b){},{buffer:0})},zb=function(){c["default"].on(d.clientPrefix+"-leave-pip",function(a){c["default"].$("."+d.cardId+" .vse-cards-ingress-carousel .vse-carousel-item")[a.index].click()})},Ma=function(a,b){ja[b]||(a=d.buildCsmPayload({eventName:d.clientPrefix+":thumbnailPreviewPlaybackStart",intPayload:b,videoAsin:a}),
void 0!==a&&null!==a&&(x(a),ja[b]=!0))},la=function(){c["default"].onScreen(c["default"].$(".vse-video-thumbnail-wrapper"),100)&&(c["default"].loadImageManually(".vse-img-manual-load:not(img)"),c["default"].each(aa,function(a){var b=a.getAttribute("data-src");var e=void 0;void 0===e&&(e=1);e=3*(e-1);b=b.split(",")[e];a.src=b;a.addEventListener("ended",Cb)}),c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,la),ja=Array(aa.length).fill(!1),A||Db(),Eb(),c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,
T),T())},Db=function(){c["default"].$(".vse-video-widget-container").delegate(".vse-desktop-carousel-card","mouseenter",function(){ba();var a=c["default"].$(this).find("video"),b=c["default"].$(this).find(".vse-video-thumbnail-img");Na(b);0<a.length&&(a[0].play(),b=c["default"].$(this).closest("li").index(),Ma(a[0].getAttribute("data-video-asin"),b),ka=0)});c["default"].$(".vse-video-widget-container").delegate(".vse-desktop-carousel-card","mouseleave",function(){var a=c["default"].$(this).find(".vse-video-thumbnail-img");
oa(a);a=c["default"].$(this).find("video");0<a.length&&pa(a[0])})},oa=function(a){a&&0<a.length&&c["default"].fadeIn(a,300,"ease-in")},Na=function(a){a&&0<a.length&&c["default"].fadeOut(a,300,"ease-in")},Oa=function(a){a=c["default"].$(".vse-video-widget-container ol li").eq(a);if(!a||0!=a.length)return c["default"].$(a).find("video")[0]},Pa=function(a){a=c["default"].$(".vse-video-widget-container ol li").eq(a);if(!a||0!=a.length)return c["default"].$(a).find(".vse-video-thumbnail-img")},ra=function(a){var b=
Oa(a);if(b){var e=Pa(a);Na(e);b.play().then().catch(function(){c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,T);c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,qa);ba(!0)});ka=a;Ma(b.getAttribute("data-video-asin"),a)}},T=function(){var a=c["default"].$(".vse-video-widget-container");if(0<a.length&&(!X()&&c["default"].onScreen(a)&&Aa(a)||X()&&c["default"].onScreen(a))){c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,T);c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,
qa);a=A?Qa():ka;var b=Oa(a);if(!b||b.paused)ba(),ra(a)}},qa=function(){var a=c["default"].$(".vse-video-widget-container");0!=a.length&&(!Aa(a)&&!X()||X()&&!c["default"].onScreen(a))&&(c["default"].on(c["default"].constants.BROWSER_EVENTS.SCROLL,T),c["default"].off(c["default"].constants.BROWSER_EVENTS.SCROLL,qa))},ba=function(a){void 0===a&&(a=!1);c["default"].each(aa,function(b){if(0!==b.currentTime||a){var e=c["default"].$(b).closest(".vse-video-thumbnail-wrapper").find(".vse-video-thumbnail-img");
oa(e);pa(b)}})},pa=function(a){setTimeout(function(){a.currentTime=0;a.load()},300)},Qa=function(){var a=0;try{var b=c["default"].$(".vse-video-widget-container"),e=parseInt(b.find("li").css("width").replace("px",""))+8,h=b.find("ol").css("-webkit-transform").split(/[()]/)[1],g=Math.abs(parseInt(h.split(",")[4]));a=Math.round(g/e)}catch(k){u("Error has occurred while finding the current focussed Element. Exception details: "+k,"ERROR")}return a},Cb=function(a){try{var b=a.target.closest("li");pa(a.target);
var e=c["default"].$(b).index()+1;a=0;try{var h=c["default"].$(".vse-video-widget-container"),g=parseInt(h.find("li").css("width").replace("px","")),k=A?c["default"].$(window).width():c["default"].$(".vse-video-widget-container .a-carousel-viewport").width();a=Math.floor(k/(g+8))}catch(m){u("Error has occurred while finding the no of Thumbnails on screen. Exception details: "+m,"ERROR")}var n=a;var f=Math.ceil(e/n),p=Math.ceil((e+1)/n),l=Pa(e-1);oa(l);f===p&&ra(e)}catch(m){u("Error has occurred while playing the next preview. Exception details: "+
m,"ERROR")}},Eb=function(){var a=c["default"].$(".vse-cards-carousel-container");bb["default"].getCarousel(a).on("change:pageNumber",function(){ba();setTimeout(function(){ra(Qa())},A?100:310)})},Fb=function(a){var b=c["default"].capabilities.mobile;return{carouselItemClassName:a.carouselElement,widgetMetricsHandler:function(e,h){var g=c["default"].throttle(function(){e()},500,{leading:!1});c["default"].on(c["default"].constants.BROWSER_EVENTS.RESIZE,function(){e()});c["default"].$("."+d.cardId+" .a-carousel-goto-prevpage").click(function(){h("left");
g()});c["default"].$("."+d.cardId+" .a-carousel-goto-nextpage").click(function(){h("right");g()});b&&(c["default"].off("a:carousel:vse-cards-vw-dp:change:pageNumber"),c["default"].on("a:carousel:vse-cards-vw-dp:change:pageNumber",g))}}},ca={thumbnailUpdates:"_vse-vw-dp-card_style_thumbnailUpdates__3sx2a",vseVideoImageWrapper:"_vse-vw-dp-card_style_vseVideoImageWrapper__3Sk54",vseCarouselItem:"_vse-vw-dp-card_style_vseCarouselItem__3IvFU",vseCarouselItemHovering:"_vse-vw-dp-card_style_vseCarouselItemHovering__3nydI",
vseHoverSection:"_vse-vw-dp-card_style_vseHoverSection__1n4YC",carouselElement:"_vse-vw-dp-card_style_carouselElement__AVBU9",vseMobileVideoWidget:"_vse-vw-dp-card_style_vseMobileVideoWidget__17sDD",vseDesktopCarousel:"_vse-vw-dp-card_style_vseDesktopCarousel__1UwLK",vseVideoDuration:"_vse-vw-dp-card_style_vseVideoDuration__vDK4S",vseVideoTitle:"_vse-vw-dp-card_style_vseVideoTitle__sPgV5",vseVideoTitleBlockOverlay:"_vse-vw-dp-card_style_vseVideoTitleBlockOverlay__ZyhF4",vseThumbnailSecondaryImg:"_vse-vw-dp-card_style_vseThumbnailSecondaryImg__2eoNE",
vseVideoTitleBlock:"_vse-vw-dp-card_style_vseVideoTitleBlock__Qp7Od",vseVideoTitleText:"_vse-vw-dp-card_style_vseVideoTitleText__1lJWI",vseVideoTitleWithCreator:"_vse-vw-dp-card_style_vseVideoTitleWithCreator__1Meqf",vseHasProfile:"_vse-vw-dp-card_style_vseHasProfile__28XGY",vseVideoCreatorName:"_vse-vw-dp-card_style_vseVideoCreatorName__3M1B_",vseProfilePlaceholder:"_vse-vw-dp-card_style_vseProfilePlaceholder__34FkJ",vseVideoThumbnailProfile:"_vse-vw-dp-card_style_vseVideoThumbnailProfile__1TFKR",
vseLazyLoadSpinner:"_vse-vw-dp-card_style_vseLazyLoadSpinner__2XtFC",vseVideoWidgetHeader:"_vse-vw-dp-card_style_vseVideoWidgetHeader__30B2I",vseVideoSegmentHeader:"_vse-vw-dp-card_style_vseVideoSegmentHeader__14ouc",vseFirstItem:"_vse-vw-dp-card_style_vseFirstItem__3h4BK",vseVideoWidgetHeaderBlock:"_vse-vw-dp-card_style_vseVideoWidgetHeaderBlock__2t4B0",vseWidgetPageState:"_vse-vw-dp-card_style_vseWidgetPageState__2eblq",vseVideoWidgetContainer:"_vse-vw-dp-card_style_vseVideoWidgetContainer__3HDIT",
vseIngressCarousel:"_vse-vw-dp-card_style_vseIngressCarousel__2Knkb",vseThumbnailPreviewImg:"_vse-vw-dp-card_style_vseThumbnailPreviewImg__3dlho",vseCardsVideoThumbnail:"_vse-vw-dp-card_style_vseCardsVideoThumbnail__3xlzJ",vseWidgetLbVideoBlock:"_vse-vw-dp-card_style_vseWidgetLbVideoBlock__VfqBF",vseWidgetLbVideoBlockWrapper:"_vse-vw-dp-card_style_vseWidgetLbVideoBlockWrapper__v6yOr",vseWidgetLbAbsolute:"_vse-vw-dp-card_style_vseWidgetLbAbsolute__bgBq7",vseWidgetLbSpinner:"_vse-vw-dp-card_style_vseWidgetLbSpinner__yjdTV",
vseVerticalLightbox:"_vse-vw-dp-card_style_vseVerticalLightbox__12YT2",vseRemoveAbsolute:"_vse-vw-dp-card_style_vseRemoveAbsolute__2xmeK",vseUploadButton:"_vse-vw-dp-card_style_vseUploadButton__5QCM8",vseUploadButtonIcon:"_vse-vw-dp-card_style_vseUploadButtonIcon__2-eZR",vseVideoDataItem:"_vse-vw-dp-card_style_vseVideoDataItem__2A7tm",vseVwdpWidgetPageState:"_vse-vw-dp-card_style_vseVwdpWidgetPageState__283lp",vseSbVideoDataItem:"_vse-vw-dp-card_style_vseSbVideoDataItem__1TmVd",thumbnailPreviewWrap:"_vse-vw-dp-card_style_thumbnailPreviewWrap__2sqTc",
vseSearchVideosInput:"_vse-vw-dp-card_style_vseSearchVideosInput__2CfoS",videoPreviewWrapper:"_vse-vw-dp-card_style_videoPreviewWrapper__vvNVU",clearSearchInput:"_vse-vw-dp-card_style_clearSearchInput__3ZK67",sponsoredVideoLabel:"_vse-vw-dp-card_style_sponsoredVideoLabel__23SsR"};sa._operationNames=[];sa.card=function(){return U.__awaiter(void 0,void 0,void 0,function(){var a,b,e;return U.__generator(this,function(h){switch(h.label){case 0:return V.count("vse-vw-dp-card:rendered",1),a=[".vse-segment-title-G1",
".vse-segment-title-RVS_G1",".vse-segment-title-RVS_G2",".vse-segment-title-RVS_G1_T1",".vse-segment-title-RVS_G2_T1"],a.forEach(function(g){c["default"].$(".vse-video-widget-dp-container ."+ca.vseVideoDataItem).find(""+g).first().addClass(ca.vseFirstItem)}),b=c["default"].capabilities.mobile,e=Fb(ca),[4,Ab(b,ca,null,e,!0,!0)];case 1:return h.sent(),[2]}})})}});
